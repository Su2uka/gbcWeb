<script src="js/getParameter.js"></script>
<style>
  .navbar {
    position: fixed; /* 固定导航栏 */
    top: 0;          /* 固定在页面顶部 */
    left: 0;         /* 从页面左侧开始 */
    width: 100%;     /* 导航栏占据整个页面宽度 */
    z-index: 1000;   /* 确保导航栏在页面其他元素之上 */
    background-color: #e3e0e3;
    height: 51px;
    border: black;
  }

  .logo {
      padding-right: 50px;
      padding-left: 50px;
    }


  .hide_box {
    background: rgba(0, 0, 0, 0.5);
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: none;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 999; /* 确保遮罩层在内容之上 */
    backdrop-filter: blur(5px); /* 添加毛玻璃效果 */
  }

  .shang_box {
    width: 300px;
    padding: 20px;
    background: #fff;
    border-radius: 10px;
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0s 0.3s;
    text-align: center;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    z-index: 1000;
  }
  .shang_box.show, .hide_box.show {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.5s;
  }
  .shang_box img {
    width: 100px; height: 100px;
    margin: 10px auto;
  }
  .pay_item {
    display: inline-block;
    margin: 10px;
    cursor: pointer;
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    border-radius: 5px;
    border: 1px solid darkgray;
    padding: 2px;
  }
  .pay_item.checked {
    border: 2px solid grey;
    border-radius: 5px;
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
  }
  .shang_tit {
    margin-bottom: 10px;
  }

  .close_button {
    position: absolute;
    top: 10px;
    right: 10px;
    background: white;
    color: black;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    text-align: center;
    line-height: 24px;
    cursor: pointer;
    font-size: 16px;
    transition: transform 0.2s ease-in-out; /* 过渡效果，平滑放大 */
  }

  .close_button:hover {
    background: white; /* 背景颜色保持白色 */
    color: black; /* 文字颜色保持黑色 */
    transform: scale(1.1); /* 鼠标悬停时放大1.1倍 */
  }


  .navbar-collapse {
    background-color: #e3e0e3;
  }

  /* 当导航栏有 navbar-inverse 类时，下拉菜单的背景色 */
  .navbar-inverse .navbar-collapse {
    background-color: black;
  }


</style>


<script>
  $(function () {
    /*alert("hello");*/
    //查询用户信息
    $.get("user/findOne",{},function (data) {
      var msg;
      if (data != null) {
        msg = "欢迎您,"+data.email;
      } else {
        msg = "您尚未登录，部分功能无法使用！"
      }
      $("#me").attr("title",msg);
    });
  });

  $(function () {

    $("#search-form").submit(function (e) {
      // 阻止表单的默认提交行为
      e.preventDefault();

      var search = $("#search-input").val();

      // 获取当前页面路径
      var currentPath = window.location.pathname;

      if (currentPath.includes('like')) {
        location.href = "http://localhost/songs_list_like.html?search="+search;
        //location.href = "https://gent1.cn/songs_list_like.html?search="+search;

      } else {
        location.href="http://localhost/songs_list.html?search="+search;
        //location.href="https://gent1.cn/songs_list.html?search="+search;
      }
    });

  });
</script>


<script>
  $(function () {
    $(window).scroll(function () {
      var scrollY = $(window).scrollTop();  // 获取当前滚动距离
      // 获取当前页面路径
      var currentPath = window.location.pathname;

      if (currentPath.includes('index')||currentPath == '/') {
        if (scrollY > 50) {  // 当页面滚动超过50px时
          $('nav').addClass('navbar-inverse');  // 添加反色类
          $('nav').css('background-color', 'black');
          $('#logo').attr('src', 'img/logo_footer.webp');  // 替换为另一张 logo 图片
        } else {
          $('nav').removeClass('navbar-inverse');  // 移除反色类
          $('nav').css('background-color', '#e3e0e3')
          $('#logo').attr('src', 'img/logo.webp');  // 恢复原始 logo 图片
        }
      }

    });


    $('li').hover(
            function() {
              $(this).addClass('active'); // 鼠标移入时添加 active 类
            },
            function() {
              $(this).removeClass('active'); // 鼠标移出时移除 active 类
            }
    );

  });
</script>

<script>
  function dashangToggle() {
    const hideBox = document.querySelector('.hide_box');
    const shangBox = document.querySelector('.shang_box');
    const isVisible = hideBox.classList.contains('show');
    if (isVisible) {
      hideBox.classList.remove('show');
      shangBox.classList.remove('show');
      setTimeout(() => {
        hideBox.style.display = 'none';
      }, 300);
    } else {
      hideBox.style.display = 'block';
      setTimeout(() => {
        hideBox.classList.add('show');
        shangBox.classList.add('show');
      }, 10);
    }
  }

  function showQRCode(type) {
    const img = document.querySelector('.shang_box img');
    const text = document.querySelector('#shang_pay_txt');
    img.src = type === 'alipay' ? 'img/alipay_qr.jpg' : 'img/wechat_qr.jpg';
    text.textContent = type === 'alipay' ? '支付宝' : '微信';
    document.querySelectorAll('.pay_item').forEach(el => el.classList.remove('checked'));
    document.querySelector(`.pay_item[data-id="${type}"]`).classList.add('checked');
  }
</script>

<header class="container-fluid" id="header">
  <div class="row">
    <nav class="navbar navbar-default  " >
      <div class="container-fluid navbar-flex ">

        <div class="navbar-header" >
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!--<a class="navbar-brand" href="#">Brand</a>-->
          <a class="navbar-brand logo" href="#">
            <img alt="Brand" src="img/logo.webp" width="130px" id="logo">
          </a>
        </div>


        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li ><a href="index.html">首页  <span class="sr-only">(current)</span></a></li>
            <li><a href="login.html">登录</a></li>
            <li><a href="songs_list.html">听歌</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" title="" id="me">我的 <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="javascript:location.href='songs_list_like.html';">我的喜欢</a></li>
                <li><a href="https://pan.baidu.com/s/155wFDfO-NTmK-XGv2bks-Q?pwd=w2eq">资源下载</a></li>
                <li><a href="mailto:gir1sbandcry@163.com">反馈</a></li>
                <li><a href="https://girls-band-cry.com/">官网</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="javascript:void(0)" onclick="dashangToggle()" >Buy me a coffee</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="javascript:location.href='user/exit';">退出登录</a></li>
                <!--<li role="separator" class="divider"></li>
                <li><a href="#">One more separated link</a></li>-->
              </ul>
            </li>
          </ul>

          <!-- Form to the right -->
          <form class="navbar-form navbar-right" id="search-form">
            <div class="form-group">
              <input type="text" class="form-control" id="search-input" placeholder="...">
            </div>
            <button type="submit" class="btn btn-default" id="search-bth">搜索</button>
          </form>

        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </div>


  <div class="hide_box" onclick="dashangToggle()"></div>
  <div class="shang_box">
    <button class="close_button" onclick="dashangToggle()">
      <span class="glyphicon glyphicon-remove"></span>
    </button>
    <div class="shang_tit">感谢您的支持!<span class="glyphicon glyphicon-heart" style="color: red; padding-left: 5px"></span></div>
    <img src="img/alipay_qr.jpg" alt="二维码" />
    <div>打开 <span id="shang_pay_txt">支付宝</span> 扫一扫</div>
    <div>
      <span class="pay_item checked" data-id="alipay" onclick="showQRCode('alipay')">支付宝</span>
      <span class="pay_item" data-id="wechat" onclick="showQRCode('wechat')">微信</span>
    </div>
  </div>

</header>
